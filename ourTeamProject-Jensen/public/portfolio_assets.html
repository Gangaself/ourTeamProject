<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>组合资产详情</title>
</head>
<body>
  <h2>投资组合资产</h2>
  <ul id="asset-list"></ul>

  <script>
    async function loadAssets() {
      const urlParams = new URLSearchParams(window.location.search);
      const portfolioId = urlParams.get('portfolio_id');

      if (!portfolioId) {
        document.body.innerHTML = '<p>未提供 portfolio_id 参数。</p>';
        return;
      }

      const res = await fetch(`/api/assets?portfolio_id=${portfolioId}`);
      const assets = await res.json();

      const list = document.getElementById('asset-list');
      if (assets.length === 0) {
        list.innerHTML = '<li>无资产记录。</li>';
        return;
      }

      assets.forEach(asset => {
        const li = document.createElement('li');
        li.innerHTML = `
          <b>${asset.name}</b> (${asset.symbol}) - ${asset.type}<br>
          当前价格：${asset.current_price || 'N/A'}<br>
          购买价格：${asset.purchase_price}<br>
          数量：${asset.quantity}<br>
          购买日期：${asset.purchase_date}
        `;
        list.appendChild(li);
      });
    }

    loadAssets();
  </script>
</body>
</html>

